; var Tooltips_new=Class.create();Tooltips_new.prototype={initialize:function(a,b){$$(a).each(function(a){new Tooltip_new(a,b)})}};var Tooltip_new=Class.create(); Tooltip_new.prototype={initialize:function(a,b){this.el=$(a);this.initialized=!1;this.setOptions(b);this.showEvent=this.show.bindAsEventListener(this);this.hideEvent=this.hide.bindAsEventListener(this);this.updateEvent=this.update.bindAsEventListener(this);Event.observe(this.el,"mouseover",this.showEvent);Event.observe(this.el,"mouseout",this.hideEvent);this.content=b&&b.content?$(b.content).innerHTML:this.el.title.stripScripts().strip();this.content=this.el.title.stripScripts().strip();this.el.title= "";str=this.content+"<br>";this.el.descendants().each(function(a){Element.readAttribute(a,"alt")&&(a.alt="")})},setOptions:function(a){this.options={backgroundColor:"",borderColor:"#FF8400",textColor:"",textShadowColor:"",maxWidth:450,align:"left",delay:250,mouseFollow:!0,opacity:0.99,appearDuration:0.25,hideDuration:0.25};Object.extend(this.options,a||{})},show:function(a){this.xCord=Event.pointerX(a);this.yCord=Event.pointerY(a);this.initialized||(this.timeout=window.setTimeout(this.appear.bind(this), this.options.delay))},hide:function(){this.initialized&&(this.appearingFX.cancel(),this.options.mouseFollow&&Event.stopObserving(this.el,"mousemove",this.updateEvent),new Effect.Fade(this.tooltip_new,{duration:this.options.hideDuration,afterFinish:function(){Element.remove(this.tooltip_new)}.bind(this)}));this._clearTimeout(this.timeout);this.initialized=!1},update:function(a){this.xCord=Event.pointerX(a);this.yCord=Event.pointerY(a);this.setup()},appear:function(){this.tooltip_new=new Element("div", {className:"tooltip_new",style:"display: none"});var a=(new Element("div",{className:"xtop"})).insert(new Element("div",{className:"xb1",style:"background-color:"+this.options.borderColor+";"})).insert(new Element("div",{className:"xb2",style:"background-color:"+this.options.backgroundColor+"; border-color:"+this.options.borderColor+";"})).insert(new Element("div",{className:"xb3",style:"background-color:"+this.options.backgroundColor+"; border-color:"+this.options.borderColor+";"})).insert(new Element("div", {className:"xb4",style:"background-color:"+this.options.backgroundColor+"; border-color:"+this.options.borderColor+";"})),b=(new Element("div",{className:"xbottom"})).insert(new Element("div",{className:"xb4",style:"background-color:"+this.options.backgroundColor+"; border-color:"+this.options.borderColor+";"})).insert(new Element("div",{className:"xb3",style:"background-color:"+this.options.backgroundColor+"; border-color:"+this.options.borderColor+";"})).insert(new Element("div",{className:"xb2", style:"background-color:"+this.options.backgroundColor+"; border-color:"+this.options.borderColor+";"})).insert(new Element("div",{className:"xb1",style:"background-color:"+this.options.borderColor+";"})),d=(new Element("div",{className:"xboxcontent",style:"background-color:"+this.options.backgroundColor+"; border-color:"+this.options.borderColor+(""!=this.options.textColor?"; color:"+this.options.textColor:"")+(""!=this.options.textShadowColor?"; text-shadow:2px 2px 0"+this.options.textShadowColor+ ";":"")})).update(this.content),e=new Element("div",{className:"tooltip_newleft",style:"display: block;float:left;"}),f=new Element("div",{className:"tooltip_newright",style:"display: block;float:left;"});this.tooltip_new.insert(e).insert(f);f.insert(a).insert(d).insert(b);$(document.body).insert({top:this.tooltip_new});this.tooltip_new.select(".xarrow b").each(function(a){a.hasClassName("a1")?a.setStyle({backgroundColor:this.options.borderColor}):a.setStyle({backgroundColor:this.options.backgroundColor, borderColor:this.options.borderColor})}.bind(this));Element.extend(this.tooltip_new);this.options.width=this.tooltip_new.getWidth();a=Math.floor(this.tooltip_new.getHeight()/1);this.tooltip_new.style.width=this.options.width+a+"px";for(var b=new Element("div",{className:"xarrow",style:"width:"+a+"px"}),d=a,g="",h=1,c=1;c<=a;c++)h=1==c?0:0>=Math.floor(c/2)?c:Math.floor(c/2),g+='<b class="arrows" style="height:'+h+"px;margin:"+d+'px 0 0 0;"></b>',d--;b.insert(g);e.insert(b);this.setup();e.style.width= a+"px";tooltip_new_left_arriw_height=a+10+"px";f.style.width=this.tooltip_new.getWidth()-a+"px";if(0<this.tooltip_new.getHeight()-a-7){var j=this.tooltip_new.getHeight()-a-7+"px";this.tooltip_new.style.height=this.tooltip_new.getHeight()+"px"}else j=this.tooltip_new.getHeight()-a+3+"px",this.tooltip_new.style.height=this.tooltip_new.getHeight()+7+"px";this.tooltip_new.select(".xarrow").each(function(a){a.style.top=j;a.style.height=tooltip_new_left_arriw_height}.bind(this));this.options.mouseFollow&& Event.observe(this.el,"mousemove",this.updateEvent);this.initialized=!0;this.appearingFX=new Effect.Appear(this.tooltip_new,{duration:this.options.appearDuration,to:this.options.opacity})},setup:function(){this.options.width>this.options.maxWidth&&(this.options.width=this.options.maxWidth,this.tooltip_new.style.width=this.options.width+6+"px");this.xCord+this.options.width>=Element.getWidth(document.body)?(this.options.align="right",this.xCord=this.xCord-this.options.width+20,this.tooltip_new.down(".xarrow").setStyle({left:this.options.width- 24+"px"})):(this.options.align="left",this.tooltip_new.down(".xarrow").setStyle({left:"1px"}));this.tooltip_new.style.left=this.xCord+7+"px";this.tooltip_new.style.top=this.yCord-this.tooltip_new.getHeight()-10+"px"},_clearTimeout:function(a){clearTimeout(a);clearInterval(a);return null}};